<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevRouter</title>
  <link rel="stylesheet" href="/css/style.css">
  <script type="module" src="/js/app.js"></script>
</head>
<body>

<header>
  <h1>DevRouter</h1>
</header>

<div class="alerts">
  <div data-js-state-warning class="alert error" aria-live="assertive"></div>
  <div data-js-warning-banner class="alert warning" aria-live="assertive"></div>
</div>

<div class="tabs" role="tablist" aria-label="管理メニュー" data-js-tabs>
  <button type="button" role="tab" id="tab-dashboard" aria-controls="panel-dashboard" aria-selected="true" tabindex="0" data-js-tab="dashboard">ダッシュボード</button>
  <button type="button" role="tab" id="tab-groups" aria-controls="panel-groups" aria-selected="false" tabindex="-1" data-js-tab="groups">グループ</button>
  <button type="button" role="tab" id="tab-routes" aria-controls="panel-routes" aria-selected="false" tabindex="-1" data-js-tab="routes">ルート</button>
  <button type="button" role="tab" id="tab-domains" aria-controls="panel-domains" aria-selected="false" tabindex="-1" data-js-tab="domains">ベースドメイン</button>
  <button type="button" role="tab" id="tab-env" aria-controls="panel-env" aria-selected="false" tabindex="-1" data-js-tab="env">環境チェック</button>
</div>

<main>

  <!-- ダッシュボード -->
  <section id="panel-dashboard" role="tabpanel" aria-labelledby="tab-dashboard" data-js-tab-panel="dashboard" class="panel active">
    <h2 class="visually-hidden">ダッシュボード</h2>
    <section class="card">
      <header>
        <h3>有効なルート一覧</h3>
        <button type="button" class="btn sm secondary" data-js-scan>スキャン</button>
      </header>
      <div class="body">
        <table>
          <thead>
            <tr>
              <th scope="col">URL</th>
              <th scope="col">ターゲット</th>
              <th scope="col">種別</th>
              <th scope="col">ソース</th>
            </tr>
          </thead>
          <tbody data-js-dashboard-routes></tbody>
        </table>
      </div>
    </section>
  </section>

  <!-- グループ管理 -->
  <section id="panel-groups" role="tabpanel" aria-labelledby="tab-groups" data-js-tab-panel="groups" class="panel">
    <h2 class="visually-hidden">グループ</h2>
    <section class="card">
      <header>
        <h3>グループの追加</h3>
      </header>
      <div class="body">
        <form data-js-add-group-form>
          <div class="group">
            <label for="group-path">ディレクトリパス</label>
            <div class="dir-autocomplete">
              <div class="dir-autocomplete-input-row">
                <input type="text" id="group-path" name="path" required placeholder="/Users/me/sites/company" autocomplete="off" spellcheck="false">
                <button type="button" class="dir-autocomplete-dot-toggle" data-js-dot-toggle aria-pressed="false" title="隠しディレクトリを表示">.</button>
              </div>
              <div class="dir-autocomplete-dropdown" role="listbox"></div>
            </div>
          </div>
          <button type="submit" class="btn primary">追加</button>
        </form>
      </div>
    </section>

    <section class="card">
      <header>
        <h3>登録済みグループ</h3>
        <button type="button" class="btn sm secondary" data-js-scan>スキャン</button>
      </header>
      <div class="body" data-js-groups-list></div>
    </section>
  </section>

  <!-- ルート管理 -->
  <section id="panel-routes" role="tabpanel" aria-labelledby="tab-routes" data-js-tab-panel="routes" class="panel">
    <h2 class="visually-hidden">ルート</h2>
    <section class="card">
      <header>
        <h3>ルートの追加</h3>
      </header>
      <div class="body">
        <form data-js-add-route-form>
          <div class="group">
            <label>
              <span>スラグ</span>
              <input type="text" name="slug" required placeholder="myapp">
            </label>
          </div>
          <div class="group">
            <label for="route-target">ターゲット</label>
            <div class="dir-autocomplete">
              <div class="dir-autocomplete-input-row">
                <input type="text" id="route-target" name="target" required placeholder="/Users/me/sites/myapp" autocomplete="off" spellcheck="false">
                <button type="button" class="dir-autocomplete-dot-toggle" data-js-dot-toggle aria-pressed="false" title="隠しディレクトリを表示">.</button>
              </div>
              <div class="dir-autocomplete-dropdown" role="listbox"></div>
            </div>
          </div>
          <div class="group auto">
            <label>
              <span>種別</span>
              <select name="type">
                <option value="directory">ディレクトリ</option>
                <option value="proxy">プロキシ</option>
              </select>
            </label>
          </div>
          <button type="submit" class="btn primary">追加</button>
        </form>
      </div>
    </section>

    <section class="card">
      <header>
        <h3>登録済みルート</h3>
      </header>
      <div class="body">
        <table>
          <thead>
            <tr>
              <th scope="col">スラグ</th>
              <th scope="col">ターゲット</th>
              <th scope="col">種別</th>
              <th scope="col"><span class="visually-hidden">操作</span></th>
            </tr>
          </thead>
          <tbody data-js-routes-list></tbody>
        </table>
      </div>
    </section>
  </section>

  <!-- ベースドメイン -->
  <section id="panel-domains" role="tabpanel" aria-labelledby="tab-domains" data-js-tab-panel="domains" class="panel">
    <h2 class="visually-hidden">ベースドメイン</h2>
    <section class="card">
      <header>
        <h3>ベースドメインの追加</h3>
      </header>
      <div class="body">
        <form data-js-add-domain-form>
          <div class="group">
            <label>
              <span>ドメイン</span>
              <input type="text" name="domain" required placeholder="dev.local">
            </label>
          </div>
          <button type="submit" class="btn primary">追加</button>
        </form>
      </div>
    </section>

    <section class="card">
      <header>
        <h3>登録済みベースドメイン</h3>
      </header>
      <div class="body">
        <table>
          <thead>
            <tr>
              <th scope="col">ドメイン</th>
              <th scope="col"><span class="visually-hidden">操作</span></th>
            </tr>
          </thead>
          <tbody data-js-domains-list></tbody>
        </table>
      </div>
    </section>
  </section>

  <!-- 環境チェック -->
  <section id="panel-env" role="tabpanel" aria-labelledby="tab-env" data-js-tab-panel="env" class="panel">
    <h2 class="visually-hidden">環境チェック</h2>
    <section class="card">
      <header>
        <h3>環境チェック</h3>
      </header>
      <div class="body" data-js-env-checks>
        <p class="empty">タブを選択すると読み込みます</p>
      </div>
    </section>
  </section>

</main>

<div data-js-toast class="toast" role="status"></div>

</body>
</html>
